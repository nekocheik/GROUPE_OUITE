//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////// ---dÃ©pendense---  /////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

require('dotenv').config();

const express = require('express');
const mongodb = require('mongodb');
const mongoose = require('mongoose');

const router = express.Router();


//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////// --- call api url / routing ---  ///////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


////////////////////////////////////////////////// --- functions ---  ///////////////////////////////////////////////

async function getUser() { 
  const client = await mongodb.MongoClient.connect(process.env.MONGO_URL, {useNewUrlParser: true});
  return client.db('vue_express').collection('user');
}




////////////////////////////////////////////////// --- call api ---  ///////////////////////////////////////////////


router.post('/', async (req, res)=>{
  const user = await getUser();
  console.log( await user.find({}).toArray() )
  res.send('Received a GET HTTP method');
});




module.exports = router;